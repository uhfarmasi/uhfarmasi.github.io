<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>

    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <button type="button" class="start-button" onclick="StartTest()">Mulai Test</button>

    <div class="question-container hidden">
        <img id="imgSoal" src="./images/soal_1.png" alt="soal nomor 1">
        <div id="stopwatch">
            Soal Nomor: &nbsp <div id="question-number"><h1>1</h1></div><br/>
            Sisa waktu: &nbsp&nbsp <div id="sisaWaktuField"></div>
        </div>
    </div>

    <div class="test-finish hidden">
        <h1>Test Telah Selesai</h1>
    </div>
</body>

<script>
    let imgSoal = document.getElementById('imgSoal');
    let questionContainer = document.querySelector('.question-container');
    let testFinish = document.querySelector('.test-finish');
    let startButton = document.querySelector('.start-button');
    let sisaWaktuField = document.getElementById('sisaWaktuField');
    let questionNumberField = document.getElementById('question-number');

    let isRunning = false;
    const tempo = 6*60;
    let sisaWaktu = tempo;

    let questions = ['soal_1','soal_2', 'soal_3','soal_4','soal_5'];
    let currentQuestion = 1;

    let testProcess = null;
    let stopwatch = null;

    function StartTest(){
        questionContainer.classList.remove('hidden');
        startButton.classList.add('hidden');
        testProcess = setInterval(ChangeQuestion, tempo*1000);
        stopwatch = setInterval(UpdateSisaWaktu, 1000);
    }
    
    function ChangeQuestion(){
        sisaWaktu = tempo;
        questionNumberField.innerHTML = `<h1>${currentQuestion+1}</h1>`;
        console.log(questions[currentQuestion]);
        if(currentQuestion < questions.length){
            imgSoal.src = "./images/" + questions[currentQuestion] + ".png";
            currentQuestion += 1;
        }else{
            clearInterval(testProcess);
            questionContainer.classList.add('hidden');
            testFinish.classList.remove('hidden');
        }
    }

    function UpdateSisaWaktu(){
        sisaWaktu -= 1;
        sisaWaktuField.innerHTML = sisaWaktu;
    }
</script>

</html>